<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Advanced QR Code Generator</title>
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      background-color: #f0f2f5;
      font-size: 12px;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    header {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
      background-color: #343a40;
      color: white;
    }

    header h2,
    header p {
      margin: 0;
      color: #fff;
      text-shadow: 1px 1px 2px black;
    }

    .header-left,
    .header-center,
    .header-right {
      flex: 1;
      min-width: 100px;
    }

    .header-center {
      text-align: center;
    }

    .header-right {
      text-align: right;
    }

    .header-right a {
      color: #0a66c2;
      text-decoration: none;
      font-weight: bold;
    }

    .header-right i {
      margin-right: 4px;
    }

    @media (max-width: 768px) {
      header {
        flex-direction: column;
        gap: 8px;
        text-align: center;
      }

      .header-left,
      .header-center,
      .header-right {
        text-align: center;
      }
    }

    main {
      flex: 1;
      padding: 1rem;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 2rem;
    }

    .form-section,
    .output-section {
      background: white;
      padding: 1rem;
      border-radius: 8px;
      box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
      flex: 1 1 320px;
      max-width: 480px;
    }

    h2 {
      text-align: center;
      margin-bottom: 1rem;
    }

    label {
      font-weight: bold;
      margin: 6px 0 4px;
      display: block;
    }

    input,
    select,
    button {
      width: 100%;
      font-size: 12px;
      padding: 8px;
      margin-bottom: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    button {
      cursor: pointer;
      border: none;
    }

    .generate-btn {
      background-color: #007bff;
      color: white;
    }

    .download-btn {
      background-color: #28a745;
      color: white;
      display: none;
    }

    .reset-btn {
      background-color: #dc3545;
      color: white;
      margin-top: 5px;
    }

    canvas {
      width: 100%;
      height: auto;
      background: white;
      border-radius: 10px;
    }

    footer {
      background-color: #343a40;
      color: white;
      text-align: center;
      padding: 1rem;
      font-size: 12px;
    }
  </style>
</head>

<body>
  <header>
    <div class="header-left">
      <h2>QR Code Generator</h2>
    </div>
    <div class="header-center">
      <p><strong>Web Development Services</strong></p>
    </div>
    <div class="header-right">
      <p>
        üìû +91-08651193833 | ‚úâÔ∏è kumarrajiv0918@gmail.com<br>
        <i class="fab fa-linkedin"></i>
        <a href="https://www.linkedin.com/in/rajiv-kumar-60b3b7255?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app"
          target="_blank">
          LinkedIn Profile
        </a>
      </p>
    </div>
  </header>

  <main>
    <div class="form-section">
      <h2>Input Details</h2>
      <a href="help.html" target="_blank" style="font-size: 12px; color: rgb(3, 0, 0);">Need Help?</a>

      <label for="typeSelect">Data Type</label>
      <select id="typeSelect">
        <option value="url">URL</option>
        <option value="text">Text</option>
        <option value="email">Email</option>
        <option value="phone">Phone</option>
        <option value="wifi">Wi-Fi</option>
        <option value="vcard">vCard</option>
      </select>

      <label for="urlInput">Input</label>
      <input type="text" id="urlInput" placeholder="Enter data" />

      <label for="textInput">Optional Text</label>
      <input type="text" id="textInput" placeholder="Optional Text" />

      <label for="positionSelect">Text Position</label>
      <select id="positionSelect">
        <option value="none">-- Text Position --</option>
        <option value="top">Top</option>
        <option value="bottom">Bottom</option>
        <option value="left">Left</option>
        <option value="right">Right</option>
      </select>

      <label for="foregroundColor">QR Foreground Color</label>
      <input type="color" id="foregroundColor" value="#000000" />

      <label for="backgroundColor">QR Background Color</label>
      <input type="color" id="backgroundColor" value="#ffffff" />

      <label for="fontSize">Text Font Size (px)</label>
      <input type="number" id="fontSize" value="12" min="8" max="40" />

      <label for="sizeSelect">QR Code Size</label>
      <select id="sizeSelect">
        <option value="300">300x300</option>
        <option value="400" selected>400x400</option>
        <option value="500">500x500</option>
      </select>

      <label for="logoInput">Upload Logo (optional)</label>
      <input type="file" id="logoInput" accept="image/*" />
      <img id="logoPreview" style="max-width: 100px; display: none; margin-top: 5px;" />

      <label for="formatSelect">Download Format</label>
      <select id="formatSelect">
        <option value="png">PNG</option>
        <option value="svg">SVG</option>
      </select>

      <button class="generate-btn" onclick="generateQR()">Generate QR</button>
      <button class="reset-btn" onclick="resetForm()">Reset</button>
    </div>

    <div class="output-section">
      <h2>QR Code Output</h2>
      <canvas id="qrCanvas"></canvas>
      <button id="downloadBtn" class="download-btn" onclick="downloadQR()">Download</button>
    </div>
  </main>

  <footer>&copy; 2025 QR Code Generator. All Rights Reserved.</footer>

  <script>
    const canvas = document.getElementById("qrCanvas");
    const ctx = canvas.getContext("2d");
    const logoInput = document.getElementById("logoInput");
    const logoPreview = document.getElementById("logoPreview");

    logoInput.addEventListener("change", function () {
      const file = this.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = () => {
          logoPreview.src = reader.result;
          logoPreview.style.display = 'block';
        };
        reader.readAsDataURL(file);
      }
    });

    async function generateQR() {
      const input = document.getElementById("urlInput").value.trim();
      const text = document.getElementById("textInput").value.trim();
      const position = document.getElementById("positionSelect").value;
      const foregroundColor = document.getElementById("foregroundColor").value;
      const backgroundColor = document.getElementById("backgroundColor").value;
      const fontSize = parseInt(document.getElementById("fontSize").value);
      const size = parseInt(document.getElementById("sizeSelect").value);
      const type = document.getElementById("typeSelect").value;
      const file = logoInput.files[0];

      // Validation
      if (!input) {
        alert("Please enter the required data.");
        return;
      }

      if (type === "email" && !/^\S+@\S+\.\S+$/.test(input)) {
        alert("Please enter a valid email address.");
        return;
      }

      if (type === "phone" && !/^\d{10,15}$/.test(input)) {
        alert("Please enter a valid phone number.");
        return;
      }

      if (type === "url" && !/^https?:\/\/\S+\.\S+/.test(input)) {
        alert("Please enter a valid URL (including https://).");
        return;
      }

      if (type === "wifi" && input.length < 4) {
        alert("Please enter a valid Wi-Fi password (min 4 characters).");
        return;
      }

      canvas.width = canvas.height = size;
      ctx.clearRect(0, 0, size, size);
      ctx.fillStyle = backgroundColor;
      ctx.fillRect(0, 0, size, size);

      let qrData = "";
      switch (type) {
        case "url": qrData = input; break;
        case "text": qrData = text || input; break;
        case "email": qrData = `mailto:${input}`; break;
        case "phone": qrData = `tel:${input}`; break;
        case "wifi": qrData = `WIFI:T:WPA;S:MySSID;P:${input};;`; break;
        case "vcard": qrData = `BEGIN:VCARD\nVERSION:3.0\nFN:${input}\nTEL:+910000000000\nEMAIL:example@example.com\nEND:VCARD`; break;
      }

      const tempCanvas = document.createElement("canvas");
      tempCanvas.width = tempCanvas.height = size * 0.75;
      await QRCode.toCanvas(tempCanvas, qrData, {
        width: tempCanvas.width,
        margin: 1,
        color: {
          dark: foregroundColor,
          light: backgroundColor
        }
      });

      ctx.drawImage(tempCanvas, size * 0.125, size * 0.125);

      if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
          const img = new Image();
          img.onload = function () {
            const imgSize = size * 0.15;
            ctx.drawImage(img, size / 2 - imgSize / 2, size / 2 - imgSize / 2, imgSize, imgSize);
          };
          img.src = e.target.result;
        };
        reader.readAsDataURL(file);
      }

      if (text && position !== "none") {
        ctx.fillStyle = foregroundColor;
        ctx.font = `bold ${fontSize}px Arial`;
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";
        switch (position) {
          case "top": ctx.fillText(text, size / 2, 20); break;
          case "bottom": ctx.fillText(text, size / 2, size - 20); break;
          case "left": ctx.save(); ctx.translate(20, size / 2); ctx.rotate(-Math.PI / 2); ctx.fillText(text, 0, 0); ctx.restore(); break;
          case "right": ctx.save(); ctx.translate(size - 20, size / 2); ctx.rotate(Math.PI / 2); ctx.fillText(text, 0, 0); ctx.restore(); break;
        }
      }

      document.getElementById("downloadBtn").style.display = "block";
    }

    function downloadQR() {
      const format = document.getElementById("formatSelect").value;
      const input = document.getElementById("urlInput").value.trim();
      if (format === "svg") {
        QRCode.toString(input, { type: 'svg' }, function (err, string) {
          const blob = new Blob([string], { type: "image/svg+xml" });
          const link = document.createElement("a");
          link.href = URL.createObjectURL(blob);
          link.download = "qr-code.svg";
          link.click();
        });
      } else {
        const link = document.createElement("a");
        link.download = "qr-code.png";
        link.href = canvas.toDataURL();
        link.click();
      }
    }

    function resetForm() {
      document.getElementById("urlInput").value = "";
      document.getElementById("textInput").value = "";
      document.getElementById("logoInput").value = "";
      logoPreview.style.display = 'none';
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      document.getElementById("downloadBtn").style.display = "none";
    }
  </script>
</body>

</html>